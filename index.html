<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <!-- icons & fonts -->
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Cormorant+Garamond:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Playfair+Display:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nitai Gems</title>

    <style>
      /* ---- MOBILE VIEWPORT FIX ---- */
      :root {
        --vh: 100dvh;
      }

      html,
      body,
      #root {
        height: 100dvh; /* FIXES chrome mobile collapsing UI */
        min-height: 100dvh;
        margin: 0;
        padding: 0;
      }

      /* ---------- WHATSAPP WIDGET ---------- */
      #getbutton-wrapper {
        position: fixed;
        bottom: max(70px, env(safe-area-inset-bottom)); /* ALWAYS visible */
        left: 10px;
        z-index: 999999;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        transition: opacity 0.3s ease;
      }

      /* Hide on reels page */
      body.reels-page-active #getbutton-wrapper {
        opacity: 0;
        pointer-events: none;
      }

      #getbutton-popup {
        background: white;
        color: #333;
        padding: 12px 15px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        margin-bottom: 8px;
        font-size: 15px;
        font-family: Arial, sans-serif;
        display: none;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes slideOut {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(10px);
        }
      }

      #getbutton-btn {
        width: 60px;
        height: 60px;
        background: #25d366;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        animation: popin 0.4s ease;
      }
      #getbutton-btn:hover {
        filter: brightness(0.9);
      }

      @keyframes popin {
        0% {
          transform: scale(0.5);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      #getbutton-btn img {
        width: 32px;
        height: 32px;
      }

      /* ---------- MOBILE BOTTOM NAV ---------- */
      #mobile-bottom-nav {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0; /* Always stick to bottom */
        height: 60px;
        background: #ffffff;
        padding-bottom: env(safe-area-inset-bottom); /* for iPhones & modern Android */
        box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.08);
        z-index: 99999;
        transform: translateY(0);
        opacity: 1;
        transition: transform 0.3s ease, opacity 0.3s ease;
      }

      /* Hide on reels page */
      body.reels-page-active #mobile-bottom-nav {
        transform: translateY(100%);
        opacity: 0;
        pointer-events: none;
      }

      #mobile-bottom-nav ul {
        list-style: none;
        margin: 0;
        padding: 0;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: space-around;
      }

      #mobile-bottom-nav li {
        flex: 1;
        text-align: center;
      }

      #mobile-bottom-nav a {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        color: #10254b;
        text-decoration: none;
        height: 100%;
        transition: color 0.2s;
      }

      #mobile-bottom-nav a.active,
      #mobile-bottom-nav a:hover {
        color: #10254b;
      }

      #mobile-bottom-nav i {
        font-size: 20px;
        margin-bottom: 4px;
      }

      /* ---------- RESPONSIVE ---------- */
      @media (max-width: 768px) {
        #getbutton-btn {
          width: 48px;
          height: 48px;
        }
        #getbutton-btn img {
          width: 26px;
          height: 26px;
        }
      }

      @media (max-width: 480px) {
        #getbutton-btn {
          width: 42px;
          height: 42px;
        }
        #getbutton-btn img {
          width: 24px;
          height: 24px;
        }
      }

      @media (min-width: 769px) {
        #mobile-bottom-nav {
          display: none !important;
        }
      }
    </style>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>

    <!-- WhatsApp Widget -->
    <div id="getbutton-wrapper">
      <div id="getbutton-popup">ðŸ‘‹ Need help? Chat with us!</div>
      <a
        id="getbutton-btn"
        target="_blank"
        href="https://wa.me/916350288120?text=Hello !%20I%20need%20help%20from%20your%20website."
      >
        <img
          src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg"
          alt="WhatsApp"
        />
      </a>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav id="mobile-bottom-nav">
      <ul>
        <li>
          <a href="/" aria-label="Home">
            <i class="fa-solid fa-house"></i>
            <span>Home</span>
          </a>
        </li>
        <li>
          <a href="/categories" aria-label="Categories">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-grid" viewBox="0 0 16 16">
  <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5z"/>
</svg>
            <span>Categories</span>
          </a>
        </li>
        <li>
          <a href="/cart" aria-label="Cart">
            <i class="fa-solid fa-cart-shopping"></i>
            <span>Cart</span>
          </a>
        </li>
        <li>
          <a href="/orders" aria-label="Orders">
            <i class="fa-solid fa-box"></i>
            <span>Orders</span>
          </a>
        </li>
      </ul>
    </nav>

    <script>
      /* ---------- WhatsApp popup ---------- */
      const popup = document.getElementById("getbutton-popup");
      const button = document.getElementById("getbutton-btn");

      function showPopup() {
        popup.style.display = "block";
        popup.style.animation = "slideIn 0.3s ease forwards";

        setTimeout(() => {
          popup.style.animation = "slideOut 0.3s ease forwards";

          setTimeout(() => {
            popup.style.display = "none";
          }, 300);
        }, 3000);
      }

      setTimeout(showPopup, 2000);
      setInterval(showPopup, 15000);

      button.addEventListener("click", () => {
        popup.style.display = "none";
      });

      /* ---------- Active link highlight ---------- */
      const navLinks = document.querySelectorAll("#mobile-bottom-nav a");
      const currentPath = location.pathname;

      navLinks.forEach((link) => {
        if (link.getAttribute("href") === currentPath) {
          link.classList.add("active");
        }
      });

      /* ---------- Hide nav on reels page ---------- */
      function updateReelsPageState() {
        if (location.pathname === '/reels') {
          document.body.classList.add('reels-page-active');
        } else {
          document.body.classList.remove('reels-page-active');
        }
      }

      // Check on load
      updateReelsPageState();

      // Check on navigation (for SPA routing)
      let lastPath = location.pathname;
      setInterval(() => {
        if (location.pathname !== lastPath) {
          lastPath = location.pathname;
          updateReelsPageState();
          
          // Update active nav link
          navLinks.forEach((link) => {
            link.classList.remove('active');
            if (link.getAttribute("href") === location.pathname) {
              link.classList.add("active");
            }
          });
        }
      }, 100);

      // Also listen for popstate (back/forward navigation)
      window.addEventListener('popstate', updateReelsPageState);
    </script>
  </body>
</html>