<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <!-- icons & fonts -->
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Cormorant+Garamond:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Playfair+Display:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nitai Gems</title>

    <style>
      /* ---- MOBILE VIEWPORT FIX ---- */
      :root {
        --vh: 1vh;
      }

      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
      }

      #root {
        min-height: 100vh;
        min-height: 100dvh; /* Dynamic viewport - modern browsers */
        display: flex;
        flex-direction: column;
      }

      /* ---------- WHATSAPP WIDGET ---------- */
      #getbutton-wrapper {
        position: fixed;
        bottom: calc(80px + env(safe-area-inset-bottom)); /* Above mobile nav */
        left: 10px;
        z-index: 999999;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      /* On desktop, position normally */
      @media (min-width: 769px) {
        #getbutton-wrapper {
          bottom: max(20px, env(safe-area-inset-bottom));
        }
      }

      #getbutton-popup {
        background: white;
        color: #333;
        padding: 12px 15px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        margin-bottom: 8px;
        font-size: 15px;
        font-family: Arial, sans-serif;
        display: none;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes slideOut {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(10px);
        }
      }

      #getbutton-btn {
        width: 60px;
        height: 60px;
        background: #25d366;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        animation: popin 0.4s ease;
      }
      #getbutton-btn:hover {
        filter: brightness(0.9);
      }

      @keyframes popin {
        0% {
          transform: scale(0.5);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      #getbutton-btn img {
        width: 32px;
        height: 32px;
      }

      /* ---------- MOBILE BOTTOM NAV ---------- */
      #mobile-bottom-nav {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        height: 70px; /* Fixed height */
        background: #fdfcf9;
        padding-bottom: env(safe-area-inset-bottom);
        box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.08);
        z-index: 99999;
      }

      #mobile-bottom-nav ul {
        list-style: none;
        margin: 0;
        padding: 0;
        height: 70px; /* Match parent */
        display: flex;
        align-items: center;
        justify-content: space-around;
      }

      #mobile-bottom-nav li {
        flex: 1;
        text-align: center;
      }

      #mobile-bottom-nav a {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        color: #d4b483;
        text-decoration: none;
        padding: 8px 0;
        transition: color 0.2s;
      }

      #mobile-bottom-nav a.active,
      #mobile-bottom-nav a:hover {
        color: #b38e5d;
      }

      #mobile-bottom-nav i {
        font-size: 20px;
        margin-bottom: 4px;
      }

      /* ---------- RESPONSIVE ---------- */
      @media (max-width: 768px) {
        #getbutton-btn {
          width: 48px;
          height: 48px;
        }
        #getbutton-btn img {
          width: 26px;
          height: 26px;
        }
        
        /* Add bottom padding to body content on mobile to account for nav */
        body {
          padding-bottom: calc(70px + env(safe-area-inset-bottom));
        }
      }

      @media (max-width: 480px) {
        #getbutton-btn {
          width: 42px;
          height: 42px;
        }
        #getbutton-btn img {
          width: 24px;
          height: 24px;
        }
      }

      @media (min-width: 769px) {
        #mobile-bottom-nav {
          display: none !important;
        }
        
        body {
          padding-bottom: 0;
        }
      }
    </style>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>

    <!-- WhatsApp Widget -->
    <div id="getbutton-wrapper">
      <div id="getbutton-popup">ðŸ‘‹ Need help? Chat with us!</div>
      <a
        id="getbutton-btn"
        target="_blank"
        href="https://wa.me/916350288120?text=Hello !%20I%20need%20help%20from%20your%20website."
      >
        <img
          src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg"
          alt="WhatsApp"
        />
      </a>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav id="mobile-bottom-nav">
      <ul>
        <li>
          <a href="/" aria-label="Home">
            <i class="fa-solid fa-house"></i>
            <span>Home</span>
          </a>
        </li>
        <li>
          <a href="/products" aria-label="Products">
            <i class="fa-solid fa-gem"></i>
            <span>Products</span>
          </a>
        </li>
        <li>
          <a href="/cart" aria-label="Cart">
            <i class="fa-solid fa-cart-shopping"></i>
            <span>Cart</span>
          </a>
        </li>
        <li>
          <a href="/orders" aria-label="Orders">
            <i class="fa-solid fa-box"></i>
            <span>Orders</span>
          </a>
        </li>
      </ul>
    </nav>

    <script>
      /* ---------- Fix viewport height for mobile browsers ---------- */
      function setVH() {
        const vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
      }
      
      setVH();
      window.addEventListener('resize', setVH);
      window.addEventListener('orientationchange', setVH);

      /* ---------- WhatsApp popup ---------- */
      const popup = document.getElementById("getbutton-popup");
      const button = document.getElementById("getbutton-btn");

      function showPopup() {
        popup.style.display = "block";
        popup.style.animation = "slideIn 0.3s ease forwards";

        setTimeout(() => {
          popup.style.animation = "slideOut 0.3s ease forwards";

          setTimeout(() => {
            popup.style.display = "none";
          }, 300);
        }, 3000);
      }

      setTimeout(showPopup, 2000);
      setInterval(showPopup, 15000);

      button.addEventListener("click", () => {
        popup.style.display = "none";
      });

      /* ---------- Active link highlight ---------- */
      const navLinks = document.querySelectorAll("#mobile-bottom-nav a");
      const currentPath = location.pathname;

      navLinks.forEach((link) => {
        if (link.getAttribute("href") === currentPath) {
          link.classList.add("active");
        }
      });
    </script>
  </body>
</html>